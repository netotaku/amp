<!DOCTYPE html>
<html lang="en-GB" class="html ">
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">  
        
        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald" rel="stylesheet">
        <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
        <link rel="stylesheet" href="/assets/player.css?{{ site.time | date: '%s' }}">   

        <title>Killa Kela Podcast</title>
        <meta name="description" content="The all new Kila Kela Podcast, every Tuesday">
        <meta name="generator" content="ZX Spectrum 128 +2" />
        <meta name="author" content="Killa Kela">
          
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@KillaKela" />
        <meta name="twitter:creator" content="@KillaKela" />
        
        <meta property="og:image" content="http://amp.killakelaofficial.com/assets/images/screen-.png"/>
        <meta property="og:title" content="The Killa Kela Podcast"/>
        <meta property="og:description" content="The all new Kila Kela Podcast, every Tuesday"/>
        <meta property="og:site_name" content="Killa Kela Podcast"/>
        <meta property="og:url" content="http://amp.killakelaofficial.com/">
        <meta property="og:type" content="website" />
          
        <link rel="alternate" type="application/rss+xml" title="Killa Kela Podcast" href="http://feeds.soundcloud.com/users/soundcloud:users:571894/sounds.rss" />

  </head>
  <body>
    {% raw %}
        <div id="js-app" class="player">   


            <header id="top" class="header">
                <div class="banner banner--grey">
                    <a target="_blank" class="banner__link" href="https://itunes.apple.com/gb/podcast/killa-kela/id1348068059?mt=2">
                        <i class="fab fa-apple"></i> <span class="banner__link__text">Subscribe on iTunes</a></a>
                    <!-- <a class="banner__burger" href="#"></a> -->
                </div> 
                <h1 class="player__title">Killa Kela Podcast</h1>   
            </header>
            
            <div v-cloak>

                <section class="section section--black">
                    <div class="section__inner">
                        <div class="heroes">                
                            <div class="heroes__hero" v-if="ready">
                                <div class="u-ratio">                                        
                                    <iframe 
                                        class="u-ratio__inner" 
                                        :src="'https://www.youtube.com/embed/' + hero.resourceId.videoId" 
                                        frameborder="0" allow="autoplay; encrypted-media" 
                                        allowfullscreen></iframe>
                                </div>
                                <div class="heroes__hero__content"> 
                                    <div class="list__item__episode">Episode {{ hero.index }}</div>
                                    <h2 class="heroes__hero__content__title">{{ clean(hero.title) }}</h2>    
                                    <p class="heroes__hero__content__description">{{ trim(hero.description) }}</p>
                                    <p><a target="_blank" href="https://www.patreon.com/killakelapodcast" class="patroen--soft">Support our Patreon</a></p>
                                </div>
                            </div>                
                        </div>
                    </div>
                </section>

                <section class="section">
                    <div class="section__inner">

                        <div class="list">
                            <a href="#" v-on:click.prevent="select(video)" class="list__item" v-for="video in page">                           
                                <div class="list__item__image"><img :src="video.thumbnails.medium.url"></div>
                                <div class="list__item__episode">Episode {{ video.index }}</div>
                                <h3 class="list__item__title">{{ clean(video.title) }}</h3>                                       
                            </a>
                        </div>

                        <div class="banner" v-if="videos.length > 0">
                            <a class="banner__link button" href="#" v-on:click.prevent="more()">More Podcasts</a>
                        </div>

                    </div>
                </section>
            
                <!-- <div v-if="open" class="overlay">
                    <a v-on:click.prevent class="overlay__close"></a>
                </div> -->

            </div> <!-- cloak -->

            <footer class="footer">
                <div class="banner banner--patreon">
                    <a href="https://www.patreon.com/killakelapodcast">Support our Patreon</a>
                </div>
                <menu class="subscribe">                                                          
                    <a href="https://soundcloud.com/killakela/sets/killa-kela-podcasts" class="subscribe__link subscribe__link--service subscribe__link--soundcloud"><i class="fab fa-soundcloud"></i></a>                    
                    <a href="https://www.mixcloud.com/lee-michael3/" class="subscribe__link subscribe__link--service subscribe__link--mixcloud"><i class="fab fa-mixcloud"></i></a>
                    <a href="https://www.youtube.com/channel/UCPZGqgSYQ43nKdVz3PUCdmg" class="subscribe__link subscribe__link--service subscribe__link--youtube"><i class="fab fa-youtube"></i></a>                    
                    <a href="https://itunes.apple.com/gb/podcast/killa-kela-podcast/id1348068059" class="subscribe__link subscribe__link--service subscribe__link--itunes"><i class="fab fa-apple"></i></a>
                    <a href="http://feeds.soundcloud.com/users/soundcloud:users:571894/sounds.rss" class="subscribe__link subscribe__link--service subscribe__link--rss"><i class="fas fa-rss"></i></a>                    
                    <span class="subscribe__link subscribe__link--label">Subscribe</span>  
                </menu>
            </footer>


        </div>
    {% endraw %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>    
    <script>

        var vm = new Vue({            
            el: '#js-app',
            data: {
                hero: {
                    resourceId:{
                        videoId: undefined
                    }
                }, videos: [], page: [], open: false,
                ready: false
            },
            mounted: function() {

            },
            created: function() {

                this.getVideos();

            },
            methods: {
                clean: function(str){
                    return str.replace(/Killa Kela Podcast - /g,'');
                },
                more: function(){                                                       
                    var vs = this.videos.splice(0, 6);
                    for(v in vs) this.page.push(vs[v]);                                                                               
                },
                trim: function(str){
                    return str.split('Subscribe')[0];
                },
                select: function(video){
                    this.hero = video;
                    $("html, body").animate({ scrollTop: 0 });
                },
                endpoint: function(page){
                    var gdata = { id: 'PLHgojIDlZkwZ2Fv92OeDTy5p_n99WNCw1', key: 'AIzaSyDL26FnmqZSIR7tlXThq4P5cP7VFj4hUAY', maxresults: 50 }
                    return "https://content.googleapis.com/youtube/v3/playlistItems?maxResults=" + gdata.maxresults + "&part=snippet&playlistId=" + gdata.id + "&key=" + gdata.key + (page || '');
                },
                indexVideos: function(){
                    for(var i = 1; i <= (this.videos.length+1); i++){                            
                        if(typeof this.videos[i] !== 'undefined'){                                                            
                            this.videos[i].index = i;                            
                        }
                    }
                },
                videosLoaded: function(){                    
                    this.indexVideos();
                    this.videos = this.videos.reverse(); 
                    this.hero = this.videos[0];                        
                    this.page = this.videos.splice(0, 6);  
                    this.ready = true;  
                },
                getVideos: function(page){                    
                    axios.get(this.endpoint(page))
                        .then(response => {

                            var videos = response.data.items;

                            for(video in videos) this.videos.push(videos[video].snippet);
                            
                            if(response.data.nextPageToken){                                
                                this.getVideos('&pageToken='+response.data.nextPageToken);                                
                            } else {
                                this.videosLoaded();
                            }
                            
                        });
                }
            }
        });

        </script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111359641-2"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-111359641-2');
        </script>
  </body>    
</html>